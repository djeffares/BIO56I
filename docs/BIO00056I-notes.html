<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.33">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>bio00056i-notes – BIO00056I</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-07ba0ad10f5680c660e360ac31d2f3b6.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-a21a96fda2a35a6034e035564d362780.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">BIO00056I</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html"> 
<span class="menu-text">BIO00056I</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./workshop5.html"> 
<span class="menu-text">workshop 5</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./workshop6.html"> 
<span class="menu-text">workshop 6</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./workshop7.html"> 
<span class="menu-text">workshop 7</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./workshop9.html"> 
<span class="menu-text">workshop 9</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./worksheet10.html"> 
<span class="menu-text">worksheet 10</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./worksheet11.html"> 
<span class="menu-text">worksheet 11</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#bio00056i-notes" id="toc-bio00056i-notes" class="nav-link active" data-scroll-target="#bio00056i-notes">BIO00056I notes</a>
  <ul class="collapse">
  <li><a href="#updates-for-2025" id="toc-updates-for-2025" class="nav-link" data-scroll-target="#updates-for-2025">Updates for 2025:</a></li>
  <li><a href="#to-do" id="toc-to-do" class="nav-link" data-scroll-target="#to-do">TO DO:</a></li>
  <li><a href="#my-weeks" id="toc-my-weeks" class="nav-link" data-scroll-target="#my-weeks">My weeks</a>
  <ul class="collapse">
  <li><a href="#week6-done" id="toc-week6-done" class="nav-link" data-scroll-target="#week6-done">week6: done</a></li>
  <li><a href="#week7" id="toc-week7" class="nav-link" data-scroll-target="#week7">week7</a></li>
  <li><a href="#week8" id="toc-week8" class="nav-link" data-scroll-target="#week8">week8</a></li>
  <li><a href="#week-10" id="toc-week-10" class="nav-link" data-scroll-target="#week-10">week 10</a></li>
  </ul></li>
  <li><a href="#from-julia" id="toc-from-julia" class="nav-link" data-scroll-target="#from-julia">From Julia</a></li>
  <li><a href="#udating-material-from-2024-25-year" id="toc-udating-material-from-2024-25-year" class="nav-link" data-scroll-target="#udating-material-from-2024-25-year">Udating material from 2024-25 year</a>
  <ul class="collapse">
  <li><a href="#links" id="toc-links" class="nav-link" data-scroll-target="#links">Links:</a></li>
  <li><a href="#updating-the-git" id="toc-updating-the-git" class="nav-link" data-scroll-target="#updating-the-git">Updating the git</a></li>
  </ul></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block"></header>




<section id="bio00056i-notes" class="level1">
<h1>BIO00056I notes</h1>
<section id="updates-for-2025" class="level2">
<h2 class="anchored" data-anchor-id="updates-for-2025">Updates for 2025:</h2>
</section>
<section id="to-do" class="level2">
<h2 class="anchored" data-anchor-id="to-do">TO DO:</h2>
<p>You can use this checklist when you are reviewing your material: https://docs.google.com/document/d/1s6ALyqcy-dWFtaORpQsEZyL9dJnfVxrXsGo4nE332BU/edit?tab=t.0#heading=h.3yor058g7zod</p>
</section>
<section id="my-weeks" class="level2">
<h2 class="anchored" data-anchor-id="my-weeks">My weeks</h2>
<section id="week6-done" class="level3">
<h3 class="anchored" data-anchor-id="week6-done">week6: done</h3>
<p>Directed study 9 (recording): Phylogenies &amp; Molecular Clock Directed study 10 (worksheet): Phylogenies &amp; Molecular Clock Workshop 5: Phylogenies &amp; Molecular Clock Monday announcment:</p>
<p>Week 6: BIO00056I Population Genetics &amp; Evolution</p>
<p>Hi Everyone,</p>
<p>Last week we learned about population structure and conservation genetics. This week we will learn about what we can do with phylogenetic trees and we will learn about the molecular clock, a concept that is central to constructing and interpreting phylogenetic trees.</p>
<p>This week you should:</p>
<p>Watch two videos on phylogenies and the molecular clock. Attempt worksheet 10, where we apply phylogenetic thinking. Attend workshop 5, where we examine influenza virus data and see some very strong evidence for the molecular clock.</p>
<p>The model answers from last week’s workshop are available under week 5/Learning materials. As usual, please use the discussion board if you have any questions, or ask in one of the sessions.</p>
<p>Best wishes, Dan</p>
</section>
<section id="week7" class="level3">
<h3 class="anchored" data-anchor-id="week7">week7</h3>
<p>Lecture 4: Population Genomics Directed study 11 (worksheet): Population Genomics: done Workshop 6: Population Genomics</p>
</section>
<section id="week8" class="level3">
<h3 class="anchored" data-anchor-id="week8">week8</h3>
<p>Directed study 12 (recording): Comparative Genomics Directed study 13 (worksheet): Comparative Genomics Workshop 7: Comparative Genomics</p>
</section>
<section id="week-10" class="level3">
<h3 class="anchored" data-anchor-id="week-10">week 10</h3>
<p>Workshop 9: Quantitative Genetics 2</p>
</section>
</section>
<section id="from-julia" class="level2">
<h2 class="anchored" data-anchor-id="from-julia">From Julia</h2>
<ul>
<li>You can use this checklist when you are reviewing your material:</li>
</ul>
<p>https://docs.google.com/document/d/1s6ALyqcy-dWFtaORpQsEZyL9dJnfVxrXsGo4nE332BU/edit?tab=t.0#heading=h.3yor058g7zod</p>
<ul>
<li><p>Exam: The exam questions will be due by the end of the consolidation week (31 Oct). There’ll be a proper call nearer the time</p></li>
<li><p>We are doing in person lectures every two weeks. Please check the timetable for which material is in person, this will require some extra work converting video material into a lecture.</p></li>
<li><p>Send an announcement on Mondays, make sure it gets emailed to students.</p></li>
<li><p>Accessibility. We got a request to check the accessibility of our material, please see Adrian’s email below and check all your material.</p></li>
<li><p>make anything you have provided as a google doc/sheet/slide or pdf available as a docx, xlsx or pptx file on the VLE, because students will then be able to download alternative formats.</p></li>
<li><p>check all your materials (see Adrian’s email) for accessibility using the tools below and make appropriate changes.</p></li>
<li><p>Workshop answers in red are not very accessible because of the low contrast. If you are using word, can you please create a style called model answer (or use the template on the shared drive). That way students can easily change the colour to something that suits them. This isn’t possible in google docs.</p></li>
<li><p>If you have been providing any material as google docs/slides/sheets etc: We have been keeping these on this shared google drive, please keep them there. If you want to keep providing links to google documents and update anything significantly, please keep the old version and rename the file to include the year (for any LoA students on an old VLE site) and make a copy for the new file. That way students will always have access to the correct documents, no matter what happens to any of us. Students have viewing access to the weekly folders on the drive but not the drive itself.</p></li>
<li><p>Please make sure that there are enough exam style questions in the workshops. Students have been struggling with some of the material, so it’s important that we provide questions that are similar enough to the exam questions.</p></li>
<li><p>Dan, as agreed your last workshop (week 8) is not in a computer room. You can still use any figures etc that the students would have produced themselves, but please rework the workshop to use this material for more exam style questions. It could include questions about the other two weeks.</p></li>
<li><p>More on workshops. We still can’t schedule the release of model answers. So please post these manually as soon as possible after a session (and remove them before the material gets released).</p></li>
<li><p>The discussion board is anonymous, so we will continue using this. The notifications are a bit erratic, so please check regularly.</p></li>
<li><p>Video captions. Just a reminder, these should be edited and available. Please also add a transcript txt file to the VLE. If you are rerecording anything: Gareth has a great guide on producing captions using whisper. It works well but if you edit the video before producing the captions it does not handle cuts well, so please check.</p></li>
</ul>
</section>
<section id="udating-material-from-2024-25-year" class="level2">
<h2 class="anchored" data-anchor-id="udating-material-from-2024-25-year">Udating material from 2024-25 year</h2>
<p>Archiving all matrial in dir: /Users/dj757/gd/modules/BIO56I</p>
<section id="links" class="level3">
<h3 class="anchored" data-anchor-id="links">Links:</h3>
<p>Comparative Genomics workshop https://docs.google.com/document/d/1u9BSFbYl1Q1VEj5kh4P7-iL2jh4cw4NaYwTuMbhT844/edit?tab=t.0#heading=h.8y9xgva25g2l</p>
<p>GWAS workshop: https://djeffares.github.io/BIO56I/BIO56I-gwas-workshop.html</p>
<section id="shared-drive-56i-population-genetics-downloading-all-material" class="level4">
<h4 class="anchored" data-anchor-id="shared-drive-56i-population-genetics-downloading-all-material">Shared drive: 56I population genetics: downloading all material</h4>
<p>https://drive.google.com/drive/folders/0AFjNJV63zpqBUk9PVA</p>
</section>
<section id="links-to-all-my-videos-for-bio00056i" class="level4">
<h4 class="anchored" data-anchor-id="links-to-all-my-videos-for-bio00056i">Links to all my videos for BIO00056I</h4>
<p>Phylogenies and molecular clock</p>
<p>Part 1: https://york.cloud.panopto.eu/Panopto/Pages/Viewer.aspx?id=327fb8cc-9f70-4207-8afc-b0b2012cd0d4</p>
<p>Part 2: https://york.cloud.panopto.eu/Panopto/Pages/Viewer.aspx?id=22c2aa19-d1eb-4819-88d0-b0b2013211ee</p>
<p>Population genomics</p>
<p>Part 1: https://york.cloud.panopto.eu/Panopto/Pages/Viewer.aspx?id=dbcad2c0-7538-4674-bc6b-b0b800bd4e41</p>
<p>Part 2: https://york.cloud.panopto.eu/Panopto/Pages/Viewer.aspx?id=1a07a26d-f1b4-4a74-a61a-b0b800bd4de4</p>
<p>Part 3: https://york.cloud.panopto.eu/Panopto/Pages/Viewer.aspx?id=6a5ef9be-157b-4bd0-9f92-b0b800bd4e04</p>
<p>Comparative genomics</p>
<p>Part 1: https://york.cloud.panopto.eu/Panopto/Pages/Viewer.aspx?id=4b6d4c84-4644-45a8-8a26-b0be010dc1f2</p>
<p>Part 2: https://york.cloud.panopto.eu/Panopto/Pages/Viewer.aspx?id=bccbfa56-156a-435d-b462-afc100d31866</p>
<p>Part 3: https://york.cloud.panopto.eu/Panopto/Pages/Viewer.aspx?id=f6db4faf-496b-432f-8078-afc100d31833</p>
<p>Part 4: https://york.cloud.panopto.eu/Panopto/Pages/Viewer.aspx?id=515454d0-24a5-4eba-80af-afc100d3180b</p>
</section>
</section>
<section id="updating-the-git" class="level3">
<h3 class="anchored" data-anchor-id="updating-the-git">Updating the git</h3>
<p>https://github.com/djeffares/BIO56I.git</p>


</section>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>